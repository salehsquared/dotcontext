version: 1
last_updated: 2026-02-13T06:15:29.145Z
fingerprint: 94f0a7ff
scope: tests
summary: >
  The tests directory contains unit tests for various components of the application, ensuring functionality and
  reliability through structured tests across modules including command execution, core markdown management, generator
  validations, MCP protocol behaviors, utility functions, and benchmarking features.
maintenance: |-
  If you modify files in this directory, update this .context.yaml to reflect
  your changes. Update the summary, and any decisions or constraints that changed.
  Do NOT update the fingerprint manually â€” run `context rehash` or it will be
  updated automatically on the next `context status` check.
  If you only read files in this directory, do not modify this file.
  Do not include secrets, API keys, passwords, or PII in this file.
decisions:
  - what: Utilizing Vitest for testing framework
    why: To enable a modern and efficient testing environment with fast execution and a rich set of features.
    tradeoff: Requires developers to be familiar with Vitest syntax and behavior.
constraints:
  - Tests must be isolated and not depend on shared state to ensure reliability and repeatability.
dependencies:
  internal:
    - ../core/scanner.js
    - ../mod${i}/index.js
    - ../shared/utils.js
    - ../src/core/fingerprint.js
    - ../src/core/scanner.js
    - ../src/core/schema.js
    - ../src/core/writer.js
    - ../src/generator/ast.js
    - ../src/generator/dependencies.js
    - ../src/generator/llm.js
    - ../src/generator/prompts.js
    - ../src/generator/static.js
    - ../src/index.js
    - ../src/providers/index.js
    - ../src/utils/config.js
    - ../src/utils/env.js
    - ../src/utils/scan-options.js
    - ./config.js
    - ./helper.js
    - ./helpers.js
subdirectories:
  - name: bench/
    summary: >
      This directory contains tests for the benchmarking and evaluation features of the codebase, validating the
      functionality of various modules such as Git commit extraction, dependency building, task generation, and scoring
      methods. The tests ensure reliability and correctness of the functions managing code analysis and reporting.
  - name: commands/
    summary: >
      This directory contains unit tests for command functionalities within the application, ensuring that commands
      execute correctly and handle various scenarios as expected. It promotes code reliability and helps catch
      regressions early in the development process.
  - name: core/
    summary: >
      The tests/core directory contains unit tests for the markdown-writer functionalities, ensuring that the management
      of AGENTS.md files behaves as expected. It validates reading, writing, and updating operations related to markdown
      files in a structured manner.
  - name: fixtures/
    summary: >
      The tests/fixtures directory contains structured test fixtures to support unit testing across various projects. It
      includes a monorepo structure, a simple project demonstration, and specific test sources to organize and isolate
      test data from application code.
  - name: generator/
    summary: >
      The tests/generator directory contains unit tests for validating the functionality of Markdown generation and
      manipulation specific to agent entries in the project. It ensures that generated content adheres to defined
      markers and formats correctly.
  - name: mcp/
    summary: >
      This directory contains tests for the MCP (Model Context Protocol) components, including server initialization and
      tool functionality. It ensures that the behavior of the MCP server and associated tools meet the expected outcomes
      defined in the specifications.
  - name: utils/
    summary: >
      The tests/utils directory contains utility test cases for functions related to concurrency management and token
      estimation within files and directories. It aims to ensure that utility functions behave as expected under various
      conditions.
exports:
  - "async function createTmpDir(): Promise<string>"
  - "async function cleanupTmpDir(dir: string): Promise<void>"
  - 'async function createFile(dirPath: string, name: string, content = ""): Promise<void>'
  - 'async function createNestedFile(basePath: string, relativePath: string, content = ""): Promise<void>'
  - "function makeValidContext(overrides?: Partial<ContextFile>): ContextFile"
  - "function makeLeanContext(overrides?: Partial<ContextFile>): ContextFile"
  - "function makeScanResult(path: string, overrides?: Partial<ScanResult>): ScanResult"
derived_fields:
  - version
  - last_updated
  - fingerprint
  - scope
  - dependencies.internal
  - exports
  - subdirectories
