version: 1
last_updated: 2026-02-13T17:39:03.402Z
fingerprint: 94f0a7ff
scope: tests
summary: >
  The tests directory contains unit tests for various components of the project, ensuring functionality and correctness
  of features including command handling, generator processes, and utility functions. It uses the Vitest framework for
  structured testing across different modules.
maintenance: |-
  If you modify files in this directory, update this .context.yaml to reflect
  your changes. Update the summary, and any decisions or constraints that changed.
  Do NOT update the fingerprint manually â€” run `context rehash` or it will be
  updated automatically on the next `context status` check.
  If you only read files in this directory, do not modify this file.
  Do not include secrets, API keys, passwords, or PII in this file.
decisions:
  - what: Use of Vitest for testing framework
    why: It provides a simple and fast testing environment integrated with TypeScript.
    tradeoff: May have a learning curve for developers unfamiliar with the framework.
constraints:
  - Tests must be written following the structure established in each module's test file.
dependencies:
  internal:
    - ../core/scanner.js
    - ../mod${i}/index.js
    - ../shared/utils.js
    - ../src/core/fingerprint.js
    - ../src/core/scanner.js
    - ../src/core/schema.js
    - ../src/core/writer.js
    - ../src/generator/ast.js
    - ../src/generator/dependencies.js
    - ../src/generator/llm.js
    - ../src/generator/prompts.js
    - ../src/generator/static.js
    - ../src/index.js
    - ../src/providers/index.js
    - ../src/utils/config.js
    - ../src/utils/env.js
    - ../src/utils/scan-options.js
    - ./config.js
    - ./helper.js
    - ./helpers.js
subdirectories:
  - name: bench/
    summary: >
      The tests/bench directory contains unit tests that evaluate the functionality and performance of the components in
      the bench module. It ensures that features related to git operations, task generation, scoring, and prompt
      building work as intended and meet specified requirements.
  - name: commands/
    summary: >
      This directory contains test cases for various command functionalities, ensuring the accuracy and reliability of
      commands related to configuration, initialization, status checking, and regeneration within the project. It
      encompasses unit tests using Vitest to validate individual command behaviors in isolation.
  - name: core/
    summary: >
      This directory contains unit tests for the core functionality of the markdown writer. It focuses on reading,
      writing, and updating agent-related markdown files, ensuring proper handling of file operations and content
      management.
  - name: fixtures/
    summary: >
      The tests/fixtures directory provides test fixtures for various scenarios, including a monorepo setup, a simple
      TypeScript project, and files designated to be ignored during testing. It serves to facilitate organized testing
      across different project configurations.
  - name: generator/
    summary: >
      This directory contains unit tests for the markdown generation functionality used in the project. It validates the
      correctness of various methods that handle the creation and manipulation of markdown content related to agents and
      their actions.
  - name: mcp/
    summary: >
      This directory contains tests for the Model Context Protocol (MCP) server and tools, ensuring proper functionality
      and behavior through various unit tests. It verifies server startup, tools registration, context handling, and
      transport connections.
  - name: utils/
    summary: >
      This directory contains unit tests for utility functions in the codebase, ensuring correctness and performance of
      functionalities such as pool processing and token estimation. It leverages the Vitest framework for running
      asynchronous tests with various scenarios.
exports:
  - "async function createTmpDir(): Promise<string>"
  - "async function cleanupTmpDir(dir: string): Promise<void>"
  - 'async function createFile(dirPath: string, name: string, content = ""): Promise<void>'
  - 'async function createNestedFile(basePath: string, relativePath: string, content = ""): Promise<void>'
  - "function makeValidContext(overrides?: Partial<ContextFile>): ContextFile"
  - "function makeLeanContext(overrides?: Partial<ContextFile>): ContextFile"
  - "function makeScanResult(path: string, overrides?: Partial<ScanResult>): ScanResult"
derived_fields:
  - version
  - last_updated
  - fingerprint
  - scope
  - dependencies.internal
  - exports
  - subdirectories
