version: 1
last_updated: 2026-02-12T22:24:10.428Z
fingerprint: 9b7f0d40
scope: tests
summary: >
  The tests directory contains various unit tests to validate the functionality and behavior of the application,
  including components such as command handlers, core functionality, dependency detection, environmental variable
  management, and code generation. It ensures the integrity and reliability of the system through comprehensive testing
  across different modules.
maintenance: |-
  If you modify files in this directory, update this .context.yaml to reflect
  your changes. Update the summary, and any decisions or constraints that changed.
  Do NOT update the fingerprint manually â€” run `context rehash` or it will be
  updated automatically on the next `context status` check.
  If you only read files in this directory, do not modify this file.
  Do not include secrets, API keys, passwords, or PII in this file.
decisions:
  - what: Use Vitest as the testing framework
    why: It provides a fast test runner with built-in support for TypeScript and a simple syntax.
    tradeoff: May require developers to familiarize themselves with a new framework if they are accustomed to alternatives
      like Jest.
constraints:
  - All test files must adhere to proper naming conventions ending with '.test.ts'.
  - Tests must not depend on external states or require configuration that is not set up within the test files.
subdirectories:
  - name: commands/
    summary: >
      This directory contains various test files for validating the functionality of command handlers. Each test file
      verifies specific commands related to configuration, status, initialization, watching, and more within the
      application.
  - name: core/
    summary: >
      The tests/core directory contains unit tests for the markdown-writer functionalities, ensuring that the management
      of AGENTS.md files behaves as expected. It validates reading, writing, and updating operations related to markdown
      files in a structured manner.
  - name: fixtures/
    summary: >
      The tests/fixtures directory contains structured test fixtures to support unit testing across various projects. It
      includes a monorepo structure, a simple project demonstration, and specific test sources to organize and isolate
      test data from application code.
  - name: generator/
    summary: >
      The tests/generator directory contains unit tests for validating the functionality of Markdown generation and
      manipulation specific to agent entries in the project. It ensures that generated content adheres to defined
      markers and formats correctly.
  - name: mcp/
    summary: >
      This directory contains tests for the MCP (Model Context Protocol) components, including server initialization and
      tool functionality. It ensures that the behavior of the MCP server and associated tools meet the expected outcomes
      defined in the specifications.
  - name: utils/
    summary: >
      This directory contains utility tests that validate the behavior of helper functions, such as concurrency
      management and token estimation from file sizes. These tests ensure correctness and performance of utility methods
      used throughout the codebase.
exports:
  - "async function createTmpDir(): Promise<string>"
  - "async function cleanupTmpDir(dir: string): Promise<void>"
  - 'async function createFile(dirPath: string, name: string, content = ""): Promise<void>'
  - 'async function createNestedFile(basePath: string, relativePath: string, content = ""): Promise<void>'
  - "function makeValidContext(overrides?: Partial<ContextFile>): ContextFile"
  - "function makeLeanContext(overrides?: Partial<ContextFile>): ContextFile"
  - "function makeScanResult(path: string, overrides?: Partial<ScanResult>): ScanResult"
derived_fields:
  - version
  - last_updated
  - fingerprint
  - scope
  - exports
  - subdirectories
