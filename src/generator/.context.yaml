version: 1
last_updated: 2026-02-13T06:15:02.807Z
fingerprint: b1c2a4a0
scope: src/generator
summary: >
  This directory is responsible for generating contextual YAML documentation for codebases by analyzing source files and
  extracting relevant metadata such as exports and dependencies. It supports functionalities like detecting external
  dependencies, collecting evidence from test artifacts, and leveraging AST parsing for code analysis.
maintenance: |-
  If you modify files in this directory, update this .context.yaml to reflect
  your changes. Update the summary, and any decisions or constraints that changed.
  Do NOT update the fingerprint manually â€” run `context rehash` or it will be
  updated automatically on the next `context status` check.
  If you only read files in this directory, do not modify this file.
  Do not include secrets, API keys, passwords, or PII in this file.
decisions:
  - what: Lazy loading of tree-sitter libraries
    why: To optimize code performance and only load parsing modules when necessary.
    tradeoff: Increased complexity in error handling if tree-sitter fails to load.
constraints:
  - Must use tree-sitter WASM files that correspond to the languages supported by the configurations.
  - Detecting exports is contingent on the availability of the respective language grammar files.
dependencies:
  internal:
    - ../core/fingerprint.js
    - ../core/scanner.js
    - ../core/schema.js
    - ../providers/index.js
    - ./...
    - ./ast.js
    - ./dependencies.js
    - ./evidence.js
    - ./prompts.js
    - ./static.js
exports:
  - "async function detectExportsAST( content: string, ext: string, ): Promise<string[] | null>"
  - "async function detectExportSignaturesAST( content: string, ext: string, ): Promise<"
  - "async function isTreeSitterAvailable(): Promise<boolean>"
  - "async function detectExternalDeps(dirPath: string): Promise<string[]>"
  - "async function detectInternalDeps(scanResult: ScanResult): Promise<string[]>"
  - "async function collectBasicEvidence(rootPath: string): Promise<Evidence | null>"
  - "async function generateLLMContext( provider: LLMProvider, scanResult: ScanResult, childContexts: Map<string,
    ContextFile>, options?:"
  - AGENTS_SECTION_START
  - AGENTS_SECTION_END
  - interface AgentsEntry
  - "function escapeSummary(text: string): string"
  - "function generateAgentsSection(entries: AgentsEntry[]): string"
  - "function generateAgentsMd( projectName: string, entries: AgentsEntry[], ): string"
  - 'function detectAgentsAction( existingContent: string | null, newSection: string, ): "create" | "append" | "replace"
    | "skip"'
  - 'function applyAgentsSection( existingContent: string, newSection: string, action: "append" | "replace", ): string'
  - SYSTEM_PROMPT
  - LEAN_SYSTEM_PROMPT
  - 'function buildUserPrompt( scanResult: ScanResult, fileContents: Map<string, string>, childContexts: Map<string,
    ContextFile>, isRoot: boolean, externalDeps?: string[], mode: "lean" | "full" = "lean", ): string'
  - type SummarySource
  - interface StaticContextResult
  - "async function generateStaticContext( scanResult: ScanResult, childContexts: Map<string, ContextFile>, options?:"
  - "async function buildSmartSummary( scanResult: ScanResult, isRoot: boolean, projectDescription?: string, ): Promise<"
  - "function extractOneSignature(content: string, name: string, ext: string): string"
  - "async function detectExportsWithFallback(content: string, ext: string): Promise<string[]>"
  - collectBasicEvidence
derived_fields:
  - version
  - last_updated
  - fingerprint
  - scope
  - dependencies.internal
  - exports
