version: 1
last_updated: 2026-02-13T17:38:42.717Z
fingerprint: b1c2a4a0
scope: src/generator
summary: >
  The `src/generator` directory contains code for generating structured documentation and managing code analysis tasks,
  including AST parsing for exports and dependency detection. It facilitates the generation of context files based on
  various programming languages and gathers evidence from existing artifacts for documentation purposes.
maintenance: |-
  If you modify files in this directory, update this .context.yaml to reflect
  your changes. Update the summary, and any decisions or constraints that changed.
  Do NOT update the fingerprint manually â€” run `context rehash` or it will be
  updated automatically on the next `context status` check.
  If you only read files in this directory, do not modify this file.
  Do not include secrets, API keys, passwords, or PII in this file.
decisions:
  - what: Use web-tree-sitter for AST parsing
    why: To accurately parse and analyze source code across multiple languages using a unified interface.
    tradeoff: Inherits complexities related to WASM loading and tree-sitter integration.
constraints:
  - "Only supports a defined set of file extensions: .ts, .tsx, .js, .jsx, .py, .go, .rs."
  - The directory must include language-specific WASM files for tree-sitter to function correctly.
dependencies:
  internal:
    - ../core/fingerprint.js
    - ../core/scanner.js
    - ../core/schema.js
    - ../providers/index.js
    - ./...
    - ./ast.js
    - ./dependencies.js
    - ./evidence.js
    - ./prompts.js
    - ./static.js
exports:
  - "async function detectExportsAST( content: string, ext: string, ): Promise<string[] | null>"
  - "async function detectExportSignaturesAST( content: string, ext: string, ): Promise<"
  - "async function isTreeSitterAvailable(): Promise<boolean>"
  - "async function detectExternalDeps(dirPath: string): Promise<string[]>"
  - "async function detectInternalDeps(scanResult: ScanResult): Promise<string[]>"
  - "async function collectBasicEvidence(rootPath: string): Promise<Evidence | null>"
  - "async function generateLLMContext( provider: LLMProvider, scanResult: ScanResult, childContexts: Map<string,
    ContextFile>, options?:"
  - AGENTS_SECTION_START
  - AGENTS_SECTION_END
  - interface AgentsEntry
  - "function escapeSummary(text: string): string"
  - "function generateAgentsSection(entries: AgentsEntry[]): string"
  - "function generateAgentsMd( projectName: string, entries: AgentsEntry[], ): string"
  - 'function detectAgentsAction( existingContent: string | null, newSection: string, ): "create" | "append" | "replace"
    | "skip"'
  - 'function applyAgentsSection( existingContent: string, newSection: string, action: "append" | "replace", ): string'
  - SYSTEM_PROMPT
  - LEAN_SYSTEM_PROMPT
  - 'function buildUserPrompt( scanResult: ScanResult, fileContents: Map<string, string>, childContexts: Map<string,
    ContextFile>, isRoot: boolean, externalDeps?: string[], mode: "lean" | "full" = "lean", ): string'
  - type SummarySource
  - interface StaticContextResult
  - "async function generateStaticContext( scanResult: ScanResult, childContexts: Map<string, ContextFile>, options?:"
  - "async function buildSmartSummary( scanResult: ScanResult, isRoot: boolean, projectDescription?: string, ): Promise<"
  - "function extractOneSignature(content: string, name: string, ext: string): string"
  - "async function detectExportsWithFallback(content: string, ext: string): Promise<string[]>"
  - collectBasicEvidence
derived_fields:
  - version
  - last_updated
  - fingerprint
  - scope
  - dependencies.internal
  - exports
