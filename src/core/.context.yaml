version: 1
last_updated: 2026-02-13T06:14:57.968Z
fingerprint: e4bf9b11
scope: src/core
summary: >
  The `src/core` directory provides utilities for managing directory fingerprints, updating markdown files related to
  agents, and scanning project directories to detect context requirements. It encapsulates functionalities for file
  management, ignoring patterns, and maintaining state information.
maintenance: |-
  If you modify files in this directory, update this .context.yaml to reflect
  your changes. Update the summary, and any decisions or constraints that changed.
  Do NOT update the fingerprint manually â€” run `context rehash` or it will be
  updated automatically on the next `context status` check.
  If you only read files in this directory, do not modify this file.
  Do not include secrets, API keys, passwords, or PII in this file.
decisions:
  - what: Use SHA-256 hashing for computing directory fingerprints
    why: Provides a secure and unique way to represent the state of the directory contents with a short hash.
    tradeoff: Hashing could introduce overhead compared to simpler checksum methods but ensures data integrity.
constraints:
  - Do NOT modify the .context.yaml file manually; use 'context rehash' or it will be updated automatically on the next
    'context status' check.
  - Ignore any files or directories matched by patterns defined in .gitignore or .contextignore.
dependencies:
  internal:
    - ../generator/markdown.js
    - ./schema.js
exports:
  - "async function computeFingerprint(dirPath: string, ignorePatterns: string[] = []): Promise<string>"
  - type FreshnessState
  - "async function checkFreshness( dirPath: string, storedFingerprint: string | undefined, ignorePatterns: string[] =
    [], ): Promise<"
  - AGENTS_FILENAME
  - "async function readAgentsMd(rootPath: string): Promise<string | null>"
  - "async function writeAgentsMd(rootPath: string, content: string): Promise<void>"
  - 'async function updateAgentsMd( rootPath: string, entries: AgentsEntry[], projectName: string, ): Promise<"created"
    | "appended" | "replaced" | "skipped">'
  - interface ScanResult
  - interface ScanOptions
  - "async function scanProject( rootPath: string, options: ScanOptions ="
  - "function groupByDepth(root: ScanResult): ScanResult[][]"
  - "function flattenBottomUp(result: ScanResult): ScanResult[]"
  - contextSchema
  - configSchema
  - type ContextFile
  - type ConfigFile
  - type FileEntry
  - type InterfaceEntry
  - type DecisionEntry
  - type SubdirectoryEntry
  - type ProjectMeta
  - type StructureEntry
  - type Evidence
  - CONTEXT_FILENAME
  - CONFIG_FILENAME
derived_fields:
  - version
  - last_updated
  - fingerprint
  - scope
  - dependencies.internal
  - exports
